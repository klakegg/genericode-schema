<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <title>Convert genericode XML to genericode JSON</title><link rel="stylesheet" href="xslstyle.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><style type="text/css">
  /* put internal CSS styles here */

</style></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="d9e1"></a>Convert genericode XML to genericode JSON</h2></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d4e2">1. Convert genericode XML to genericode JSON - gc2gcj.xsl</a></span></dt><dd><dl><dt><span class="section"><a href="#d4e25">1.1. Invocation parameters and input file</a></span></dt><dt><span class="section"><a href="#d4e50">1.2. Main logic</a></span></dt><dt><span class="section"><a href="#d4e200">1.3. Housekeeping, etc.</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e2">2. Common code for handling JSON - jsonsupport.xsl</a></span></dt><dt><span class="section"><a href="#index_">3. Index</a></span></dt></dl></div><p class="xsl-subtitle-import-include"><span class="bold"><strong>
      Import/include tree (in order of importance; reverse import order)
    </strong></span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-list-import-include-item"><span class="xsl-file-reference-link"><a class="link" href="#d4e2" title="1.&nbsp;Convert genericode XML to genericode JSON - gc2gcj.xsl"><span class="xsl-file-reference-title">Convert genericode XML to genericode JSON</span> - <span class="xsl-file-reference-name"><code class="literal">gc2gcj.xsl</code></span></a></span></span><div class="itemizedlist"><ul type="circle" compact><li><a class="link" href="#d5e2" title="2.&nbsp;Common code for handling JSON - jsonsupport.xsl"><span class="xsl-list-import-include-item"><span class="xsl-file-reference-link"><a class="link" href="#d5e2" title="2.&nbsp;Common code for handling JSON - jsonsupport.xsl"><span class="xsl-file-reference-title">Common code for handling JSON</span> - <span class="xsl-file-reference-name"><code class="literal">jsonsupport.xsl</code></span></a></span></span></a></li></ul></div></li></ul></div><p class="xsl-subtitle-invocation"><span class="bold"><strong>
      Available invocation parameter</strong></span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-input-parameter-link"><a class="link" href="#d4e46"><span class="xsl-input-parameter-name"><code class="literal">verbose</code></span> (<span class="xsl-input-parameter-module-title">Convert genericode XML to genericode JSON</span> - <span class="xsl-input-parameter-module-name"><code class="literal">gc2gcj.xsl</code></span>)</a></span></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e2"></a>1.&nbsp;Convert genericode XML to genericode JSON - <code class="literal">gc2gcj.xsl</code></h2></div></div></div><p class="xsl-subtitle-filename">
              Filename: <code class="literal">gc2gcj.xsl</code></p><p class="xsl-subtitle-import">Import statement:</p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-file-reference-link"><a class="link" href="#d5e2" title="2.&nbsp;Common code for handling JSON - jsonsupport.xsl"><span class="xsl-file-reference-title">Common code for handling JSON</span> - <span class="xsl-file-reference-name"><code class="literal">jsonsupport.xsl</code></span></a></span></li></ul></div><div class="literallayout"><p><code class="literal">20210811-0130z</code></p></div><p>
    This stylesheet supports only a subset of genericode XML in the conversion
    to JSON syntax.
  </p><p class="xsl-output xsl-top-level"><a name="d4e21"></a><code class="literal"> <span class="bold xsl-block-other">method="text"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:output)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-output"><p>Text output</p></span></blockquote></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d4e25"></a>1.1.&nbsp;Invocation parameters and input file</h3></div></div></div><p>
    The input file is an instance of a subset of the genericode XSD model
    for genericode XML. Empirical evidence is this subset is a commonly-used
    subset meeting the needs of many users.
  </p><p>
    Supported at this time is only simple lists with multiple rows of multiple
    columns of simple values, not any complex values as defined by genericode.
  </p><p>
    The invocation can include verbose=yes to serialize the list of code values
    as verbose as the introductory material. When not verbose (the default) the
    list of codes is simplified.
  </p><p class="xsl-param xsl-top-level"><a name="d4e46"></a><code class="literal"><span class="bold xsl-block-name">verbose</span> <span class="bold xsl-block-other">select="'no'"</span> <span class="bold xsl-block-other">as="xsd:string"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:param)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-param"><p>
    Indication of whether or not the code list values are explicit
  </p></span></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d4e50"></a>1.2.&nbsp;Main logic</h3></div></div></div><p class="xsl-template xsl-top-level"><a name="d4e62"></a><code class="literal"> <span class="bold xsl-block-match">match="/gc:CodeList"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Get things going</p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d4e81"></a><code class="literal"> <span class="bold xsl-block-match">match="Annotation[AppInfo]"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>
    Annotations serialize the application info based on the namespaces in use.
  </p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d4e98"></a><code class="literal"> <span class="bold xsl-block-match">match="AppInfo | Identification | SimpleCodeList"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>
    Most elements can be transliterated.
  </p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d4e109"></a><code class="literal"> <span class="bold xsl-block-match">match="ColumnSet"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>
    Column sets serialize the column and key components separately
  </p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d4e148"></a><code class="literal"> <span class="bold xsl-block-match">match="Data"</span> <span class="bold xsl-block-other">mode="gu:generic"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>
    Column sets serialize the column and key components separately
  </p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d4e167"></a><code class="literal"> <span class="bold xsl-block-match">match="ColumnRef"</span> <span class="bold xsl-block-other">mode="gu:generic"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>
    Column references are handled explicitly
  </p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d4e181"></a><code class="literal"> <span class="bold xsl-block-match">match="SimpleCodeList[starts-with('no',lower-case($verbose))]"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>
    When not verbose, the list of codes is simplified
  </p></span></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d4e200"></a>1.3.&nbsp;Housekeeping, etc.</h3></div></div></div><p class="xsl-template xsl-top-level"><a name="d4e224"></a><code class="literal"> <span class="bold xsl-block-match">match="*"</span> <span class="bold xsl-block-other">mode="gu:generic"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>
    Generic serializations simply create property strings.
  </p><p>
    Note that this does not handle attributes and elements of the same name
    and namespace.
  </p><p>
    Note that this does not handle mixed content.
  </p><p class="xsl-template-parameter">Parameter <code class="literal"><span class="bold xsl-template-parameter-name">isList</span> <span class="bold xsl-template-parameter-attributes">as="xsd:boolean"</span></code></p><div class="blockquote"><blockquote class="blockquote"><p>
      The invoker of this is putting the content in a list, so the name isn't
      needed.
    </p></blockquote></div></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d4e280"></a><code class="literal"><span class="bold xsl-block-name">gu:handleGenericElement</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>
    Handle a given generic element
  </p><p class="xsl-template-parameter">Parameter <code class="literal"><span class="bold xsl-template-parameter-name">exceptions</span> <span class="bold xsl-template-parameter-attributes">as="node()*"</span></code></p><div class="blockquote"><blockquote class="blockquote"><p>Which nodes are not to be handled</p></blockquote></div></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d4e346"></a><code class="literal"><span class="bold xsl-block-name">gu:handleGenericElementContent</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Handle generic content of elements</p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d4e377"></a><code class="literal"> <span class="bold xsl-block-match">match="text()"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>
    A pushed text node is ignored as it is assumed to be indentation.
  </p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d4e385"></a><code class="literal"> <span class="bold xsl-block-match">match="*"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>
    The identity template is used to copy all nodes not already being handled
    by other template rules.
  </p></span></blockquote></div><p class="xsl-function xsl-top-level"><a name="d4e400"></a><code class="literal"><span class="bold xsl-block-name">gu:xpath</span><span class="xsl-block-function-param">(1)</span> <span class="bold xsl-block-other">as="xsd:string"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:function)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-function"><p>Return the XPath of the given node</p><p class="xsl-template-parameter">Parameter <code class="literal"><span class="bold xsl-template-parameter-name">node</span> <span class="bold xsl-template-parameter-attributes">as="node()"</span></code></p><div class="blockquote"><blockquote class="blockquote"><p>The node to report on</p></blockquote></div></span></blockquote></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e2"></a>2.&nbsp;Common code for handling JSON - <code class="literal">jsonsupport.xsl</code></h2></div></div></div><p>
              Path: <code class="literal">jsonsupport.xsl</code></p><div class="literallayout"><p><code class="literal">20210811-0130z</code></p></div><p>
    Support for serializing JSON structures: objects, Boolean values, 
    number, strings, lists of string or number items.
  </p><p class="xsl-template xsl-top-level"><a name="d5e19"></a><code class="literal"> <span class="bold xsl-block-match">match="o"</span> <span class="bold xsl-block-other">mode="gu:jsonSerialize"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Handle a nested item in JSON syntax</p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d5e61"></a><code class="literal"> <span class="bold xsl-block-match">match="l"</span> <span class="bold xsl-block-other">mode="gu:jsonSerialize"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Handle a list item in JSON syntax</p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d5e99"></a><code class="literal"> <span class="bold xsl-block-match">match="s"</span> <span class="bold xsl-block-other">mode="gu:jsonSerialize"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Handle a string item in JSON syntax</p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d5e120"></a><code class="literal"> <span class="bold xsl-block-match">match="n"</span> <span class="bold xsl-block-other">mode="gu:jsonSerialize"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Handle a number item in JSON syntax</p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d5e141"></a><code class="literal"> <span class="bold xsl-block-match">match="f"</span> <span class="bold xsl-block-other">mode="gu:jsonSerialize"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Handle a false Boolean value in JSON syntax</p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d5e162"></a><code class="literal"> <span class="bold xsl-block-match">match="t"</span> <span class="bold xsl-block-other">mode="gu:jsonSerialize"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Handle a true Boolean value in JSON syntax</p></span></blockquote></div><p class="xsl-template xsl-top-level"><a name="d5e183"></a><code class="literal"> <span class="bold xsl-block-match">match="*"</span> <span class="bold xsl-block-other">mode="gu:jsonSerialize"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:template)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-template"><p>Unhandled item in JSON syntax</p></span></blockquote></div><p class="xsl-function xsl-top-level"><a name="d5e219"></a><code class="literal"><span class="bold xsl-block-name">gu:jsonString</span><span class="xsl-block-function-param">(1)</span> <span class="bold xsl-block-other">as="xsd:string"</span><span class="emphasis"><em><span class="xsl-block-type"> (xsl:function)</span></em></span></code></p><div class="blockquote"><blockquote class="blockquote"><span class="xsl-detail-function"><p>
    Escape a JSON string value
  </p><p class="xsl-template-parameter">Parameter <code class="literal"><span class="bold xsl-template-parameter-name">gu:value</span> <span class="bold xsl-template-parameter-attributes">as="xsd:string"</span></code></p><div class="blockquote"><blockquote class="blockquote"><p>The value of the string.</p></blockquote></div></span></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="index_"></a>3.&nbsp;Index</h2></div></div></div><p><a class="link" href="#index-H"><span class="bold xsl-index-letter-title">H</span></a> <a class="link" href="#index-J"><span class="bold xsl-index-letter-title">J</span></a> <a class="link" href="#index-V"><span class="bold xsl-index-letter-title">V</span></a> <a class="link" href="#index-X"><span class="bold xsl-index-letter-title">X</span></a> </p><p><a name="index-H"></a><span class="bold xsl-index-letter-section">H</span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-index-entry-link"><a class="link" href="#d4e280"><span class="xsl-index-top-level xsl-template"><span class="xsl-index-entry-name"><code class="literal">gu:handleGenericElement</code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d4e200" title="1.3.&nbsp;Housekeeping, etc.">Housekeeping, etc.</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d4e2" title="1.&nbsp;Convert genericode XML to genericode JSON - gc2gcj.xsl"><code class="literal">gc2gcj.xsl</code></a></span>)</span></li><li><span class="xsl-index-entry-link"><a class="link" href="#d4e346"><span class="xsl-index-top-level xsl-template"><span class="xsl-index-entry-name"><code class="literal">gu:handleGenericElementContent</code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d4e200" title="1.3.&nbsp;Housekeeping, etc.">Housekeeping, etc.</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d4e2" title="1.&nbsp;Convert genericode XML to genericode JSON - gc2gcj.xsl"><code class="literal">gc2gcj.xsl</code></a></span>)</span></li></ul></div><p><a name="index-J"></a><span class="bold xsl-index-letter-section">J</span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-index-entry-link"><a class="link" href="#d5e219"><span class="xsl-index-top-level xsl-function"><span class="xsl-index-entry-name"><code class="literal">gu:jsonString<span class="emphasis"><em>(1)</em></span></code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d5e2" title="2.&nbsp;Common code for handling JSON - jsonsupport.xsl">Common code for handling JSON</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d5e2" title="2.&nbsp;Common code for handling JSON - jsonsupport.xsl"><code class="literal">jsonsupport.xsl</code></a></span>)</span></li></ul></div><p><a name="index-V"></a><span class="bold xsl-index-letter-section">V</span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-index-entry-link"><a class="link" href="#d4e46"><span class="xsl-index-top-level xsl-param"><span class="xsl-index-entry-name"><code class="literal">verbose</code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d4e25" title="1.1.&nbsp;Invocation parameters and input file">Invocation parameters and input file</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d4e2" title="1.&nbsp;Convert genericode XML to genericode JSON - gc2gcj.xsl"><code class="literal">gc2gcj.xsl</code></a></span>)</span></li></ul></div><p><a name="index-X"></a><span class="bold xsl-index-letter-section">X</span></p><div class="itemizedlist"><ul type="disc" compact><li><span class="xsl-index-entry-link"><a class="link" href="#d4e400"><span class="xsl-index-top-level xsl-function"><span class="xsl-index-entry-name"><code class="literal">gu:xpath<span class="emphasis"><em>(1)</em></span></code></span></span></a> (<span class="xsl-index-entry-module-title"><a class="link" href="#d4e200" title="1.3.&nbsp;Housekeeping, etc.">Housekeeping, etc.</a></span> - <span class="xsl-index-entry-module-name"><a class="link" href="#d4e2" title="1.&nbsp;Convert genericode XML to genericode JSON - gc2gcj.xsl"><code class="literal">gc2gcj.xsl</code></a></span>)</span></li></ul></div></div></div></body></html>